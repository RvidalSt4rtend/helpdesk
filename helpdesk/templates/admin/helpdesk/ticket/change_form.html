{% extends "unfold/change_form.html" %}
{% load i18n admin_urls %}

{% block submit_buttons_bottom %}
{{ block.super }}

{% if original %}
    {% if original.estado == 'ABIERTO' or original.estado == 'ESPERANDO_RESPUESTA' %}
        <div class="flex gap-3 mt-3">
            <a href="{% url 'admin:helpdesk_ticket_change' object_id %}?_changelist_filters={{ request.GET.urlencode }}&estado=EN_PROGRESO" 
               class="unfold-btn unfold-btn-primary">
                Cambiar a En Progreso
            </a>
            
            <a href="{% url 'admin:helpdesk_ticket_change' object_id %}?_changelist_filters={{ request.GET.urlencode }}&estado=RESUELTO" 
               class="unfold-btn unfold-btn-success">
                Marcar como Resuelto
            </a>
        </div>
    {% elif original.estado == 'EN_PROGRESO' %}
        <div class="flex gap-3 mt-3">
            <a href="{% url 'admin:helpdesk_ticket_change' object_id %}?_changelist_filters={{ request.GET.urlencode }}&estado=ESPERANDO_RESPUESTA" 
               class="unfold-btn unfold-btn-warning">
                Esperar Respuesta
            </a>
            
            <a href="{% url 'admin:helpdesk_ticket_change' object_id %}?_changelist_filters={{ request.GET.urlencode }}&estado=RESUELTO" 
               class="unfold-btn unfold-btn-success">
                Marcar como Resuelto
            </a>
        </div>
    {% elif original.estado == 'RESUELTO' %}
        <div class="flex gap-3 mt-3">
            <a href="{% url 'admin:helpdesk_ticket_change' object_id %}?_changelist_filters={{ request.GET.urlencode }}&estado=CERRADO" 
               class="unfold-btn unfold-btn-danger">
                Cerrar Ticket
            </a>
            
            <a href="{% url 'admin:helpdesk_ticket_change' object_id %}?_changelist_filters={{ request.GET.urlencode }}&estado=ABIERTO" 
               class="unfold-btn unfold-btn-secondary">
                Reabrir Ticket
            </a>
        </div>
    {% elif original.estado == 'CERRADO' %}
        <div class="flex gap-3 mt-3">
            <a href="{% url 'admin:helpdesk_ticket_change' object_id %}?_changelist_filters={{ request.GET.urlencode }}&estado=ABIERTO" 
               class="unfold-btn unfold-btn-secondary">
                Reabrir Ticket
            </a>
        </div>
    {% endif %}
{% endif %}
{% endblock %}