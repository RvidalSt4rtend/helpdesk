{% extends 'Home/Index.html' %}
{% load crispy_forms_tags %}

{% block title %}Crear Nuevo Ticket{% endblock %}
{% block panel_title %}Formulario de Creación de Tickets{% endblock %}

{% block panel_content %}
<div class="space-y-6">
    <!-- Cabecera con instrucciones -->
    <div class="bg-blue-900 bg-opacity-20 p-4 rounded-lg border border-blue-800">
        <div class="flex items-start">
            <div class="flex-shrink-0 pt-0.5">
                <i class="fas fa-info-circle text-xl text-blue-500"></i>
            </div>
            <div class="ml-3">
                <h3 class="text-sm font-medium text-blue-500">Información sobre la creación de tickets</h3>
                <div class="mt-2 text-sm text-secondary-500">
                    <p>Complete todos los campos del formulario con la información más detallada posible para ayudarnos a resolver su problema de manera eficiente.</p>
                    <ul class="list-disc pl-5 mt-2 space-y-1">
                        <li>Elija un título descriptivo que resuma claramente el problema</li>
                        <li>Seleccione la categoría correcta para su solicitud</li>
                        <li>Proporcione detalles completos en la descripción</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Formulario de creación -->
    <div class="bg-dark-tertiary rounded-lg shadow-md overflow-hidden">
        <div class="bg-primary-200 bg-opacity-20 px-6 py-4">
            <h3 class="text-lg font-semibold text-primary-500">Datos del Ticket</h3>
        </div>
        
        <div class="p-6">
            <form method="post" enctype="multipart/form-data" class="space-y-6">
                {% csrf_token %}
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        {{ form.title|as_crispy_field }}
                    </div>
                    <div>
                        {{ form.tipo|as_crispy_field }}
                    </div>
                </div>
                
                <div>
                    {{ form.description|as_crispy_field }}
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        {{ form.prioridad|as_crispy_field }}
                    </div>
                    <div>
                        {{ form.adjunto|as_crispy_field }}
                    </div>
                </div>
                
                <div class="flex justify-between pt-4">
                    <a href="{% url 'helpdesk:ticket_list' %}" class="inline-flex items-center px-4 py-2 bg-dark-tertiary hover:bg-dark-secondary text-secondary-500 rounded-md shadow-sm transition-colors">
                        <i class="fas fa-times mr-2"></i> Cancelar
                    </a>
                    <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-md shadow-sm transition-colors">
                        <i class="fas fa-save mr-2"></i> Crear Ticket
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Personalizar estilos para crispy forms en modo oscuro
        const inputs = document.querySelectorAll('input:not([type="file"]), select, textarea');
        inputs.forEach(input => {
            input.classList.add('bg-dark-secondary', 'border-dark-tertiary', 'text-secondary-500');
            input.classList.remove('bg-white', 'border-gray-300');
        });

        // Ajustar etiquetas de formulario
        const labels = document.querySelectorAll('label');
        labels.forEach(label => {
            label.classList.add('text-secondary-500');
            label.classList.remove('text-gray-700');
        });

        // Ajustar textos de ayuda
        const helpTexts = document.querySelectorAll('.form-text');
        helpTexts.forEach(text => {
            text.classList.add('text-secondary-400');
            text.classList.remove('text-gray-600');
        });
    });
</script>
{% endblock %} 